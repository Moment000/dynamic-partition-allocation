# 🎉动态分区分配方式的模拟

## 🧑实验目的
1. 掌握动态分区分配方式使用的数据结构和分配算法。（首次适应分配算法/最佳适应分配算法/最坏适应分配算法）
2. 进一步加深对动态分区分配管理方式及其实现过程的理解。

## 实验环境

- 硬件环境：
    - 计算机一台
- 软件环境：
    - Windows/Linux操作系统
    - C编译环境（Dev、VS、gcc等）

## 😄实验内容

为了模拟实现首次/最佳/最坏适应分配算法的内存块分配与回收,首先封装了三个算法，分别是首次适应、最佳适应和最坏适应。

1.首次适应算法（First Fit）：
- 遍历内存链表，查找第一个未分配且大小足够的内存块。
- 如果找到了匹配的内存块，根据进程大小进行分配：
- 如果匹配的内存块大小与进程大小相等，直接将该内存块标记为已分配。
- 如果匹配的内存块大小大于进程大小，将该内存块分割成两个部分：
- 一个已分配的内存块，大小为进程大小。
- 一个空闲的内存块，大小为原始内存块大小减去进程大小。
- 如果找不到足够大小的内存块，表示无法分配。

2.最佳适应算法（Best Fit）：
- 遍历内存链表，查找所有未分配且大小足够的内存块。
- 在所有匹配的内存块中，选择大小最接近进程大小的内存块进行分配。
- 分配过程与首次适应算法类似。

3.最坏适应算法（Worst Fit）：
- 遍历内存链表，查找所有未分配且大小足够的内存块。
- 在所有匹配的内存块中，选择大小最大的内存块进行分配。
- 分配过程与首次适应算法类似。

对于分配和释放内存的操作，代码使用了单链表来表示内存块。每个内存块结构体包含了起始地址、大小、分配状态和指向下一个内存块的指针。初始化内存时，创建一个具有给定大小的初始内存块，并将其设置为未分配状态。分配内存时，根据所选算法在链表中找到适合的内存块进行分配。释放内存时，将分配状态标记为未分配，并根据需要合并相邻的空闲内存块。

在用户界面中，用户可以选择分配内存、释放内存、显示内存状态或退出程序。根据用户选择的算法和输入的进程大小，执行相应的操作并显示相关信息。
当用户运行程序时，首先需要输入内存的大小。这个内存大小将作为一个初始的内存块，并被标记为未分配状态。然后，用户将进入一个循环菜单，可以选择以下操作：

1. 分配内存：用户需要输入要分配的进程大小和分配算法（1.首次适应 2.最佳适应 3.最坏适应）。根据选择的算法，程序将在内存链表中查找可用的内存块进行分配。如果找到合适的内存块，程序将进行分配，并显示分配成功的起始地址。如果找不到足够的内存空间，则显示无足够内存空间可供分配的消息。
2. 释放内存：用户需要输入要释放的进程大小。程序将在内存链表中查找已分配且大小匹配的内存块。如果找到匹配的内存块，程序将将其标记为未分配状态，并尝试合并相邻的空闲内存块。如果找不到要释放的内存块，则显示找不到要释放的内存块的消息。
3. 显示内存状态：程序将遍历内存链表，并显示当前的空闲分区和已分配分区的情况。每个分区都将显示起始地址和大小。
4. 退出：程序将结束循环，退出运行。


## 👍运行效果
### 输入内存大小
![输入内存大小](/images/输入内存大小.png "输入内存大小")
### 用户选项
![选项](/images/选项.png "用户选项")
### 首次适应算法
![首次适应](/images/首次适应.png "首次适应算法")
### 最佳适应算法
![最佳适应](/images/最佳适应.png "最佳适应算法")
### 最坏适应算法
![最坏适应](/images/最坏适应.png "最坏适应算法")
### 释放内存
![释放内存](/images/释放内存.png "释放内存")